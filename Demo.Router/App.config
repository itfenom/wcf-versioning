<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.serviceModel>

    <services>
      <service name="System.ServiceModel.Routing.RoutingService">
        <endpoint address="net.tcp://localhost:1000/DemoServiceRouter"
                  binding="netTcpBinding"
                  contract="System.ServiceModel.Routing.IRequestReplyRouter"
                  name="router1" />
      </service>
    </services>

    <routing>
      <filters>
        <filter name="router1endpoint"
                filterType="EndpointAddress"
                filterData="net.tcp://localhost:1000/DemoServiceRouter"/>
      </filters>
      <filterTables>
        <filterTable name="routingTable">
          <add filterName="router1endpoint" 
               endpointName="host1endpoint"/>
        </filterTable>
      </filterTables>
    </routing>

    <client>
      <endpoint address="net.tcp://localhost:1001/DemoService/v1"
                binding="netTcpBinding"
                contract="*" 
                name="host1endpoint"/>
      <endpoint address="net.tcp://localhost:1002/DemoService/v2"
                binding="netTcpBinding"
                contract="*" 
                name="host2endpoint"/>
    </client>

    <bindings>
      <netTcpBinding>
        <binding maxReceivedMessageSize="2000000" />
      </netTcpBinding>
    </bindings>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <routing filterTableName="routingTable"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

  </system.serviceModel>

  <startup>
    <supportedRuntime version="v4.0"
                      sku=".NETFramework,Version=v4.5.2" />
  </startup>
  
</configuration>